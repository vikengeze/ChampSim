To Do:
1) Search for Intel/AMD TLB architectures to find standards
2) Fix Morrigan for data based TLB + prefetching
3) Στο Quagmire(champsim directory απο ISCA) λεει: 
4) Τελικα το Morrigan κανει prefetch μονο για instruction(if iflag == 1 στο cache.cc)
5) Στο Morrigan κανει prefetch μονο οταν εχουμε miss(cache.cc ~ line 800)

----------------------------------------------------------------------------------------

Πρακτικα τα trace files(ειτε αυτα που δινονται, ειτε αυτα που θα φτιαξω) θα ειναι της μορφης 
(Unique Instr Id, Cycle Count, Load Address, Instruction Pointer of the Load, LLC hit/miss)

Προμπλεμζ:
1) Check P2TLB, αντιστοιχο με το παρακατω
2) Τα issued prefetches ειναι 0. Αλλαγη στο cache.cc γραμμη 1886. fixed
3) Φτιαξε την cache.cc ποτε γινεται το prefetch.Αυτη τη στιγμη ειναι μονο για miss:
Πρωτο βημα φτιαχνω να δουλευει για data(//)
Δευτερο βημα προσπαθω να προσθεσω tracing και στα hits μου

free_indexes = sorted_free_distances();
stlb_prefetcher_operate(RQ.entry[index].address, RQ.entry[index].ip, 0, RQ.entry[index].type, answer.first, warmup_complete[cpu], free_indexes, RQ.entry[index].instr_id, iflag);
stlb_prefetcher_cache_fill(RQ.entry[index].address, 0, 0, 0, 0);

Ναι βεβαιως, οσον αφορα το tracing, νομιζω πως καταφερα να φτιαξω τα load traces, με ολα τα stlb accesses, και hit/miss tracking, και τωρα προσπαθω να ελεγξω αν τα trace files που προκυπτουν ειναι σωστα. Επισης, για το P2TLB ειχατε δικιο και βρηκα μεσα στο paper πως πρακτικα προσπερνουσε τον prefetch buffer και εβαζε τα prefetches κατευθειαν μεσα στην STLB, οποτε το απενεργοποιησα. 
Το προβλημα που δημιουργηθηκε ομως, ειναι πως το Morrigan εχει useful/useless prefetch tracking μονο για instructions. Συγκεκριμενα, απ'οσο εχω καταλαβει, οι counters μεταβαλλονται κανονικα εντος των handle_fill() και handle_writeback() που χρησιμοποιουνται για τις απλες caches, και εφοσον το Morrigan αντιμετωπιζει τα prefetches στην STLB με διαφορετικο τροπο, εχει προστεθει ενα κομματι κωδικα στην συγκεκριμενη συναρτηση που κανει handle τα instructions. Προς το παρον εχω θεσει την P2TLB=1 και ελεγχω αν τα trace files που εφτιαξα ειναι σωστα. Εφοσον ομως θα χρησιμοποιηθει ο prefetch buffer για το νευρωνικο, ηθελα τη γνωμη σας για το εαν αξιζει να προσπαθησω να προσθεσω με καποιον τροπο counters για τα useful και useless prefetches και αν ναι ποιος θεωρειτε οτι ειναι ο βελτιστος τροπος.

Για το tracking των useful/useless prefetches, χρησιμοποιειται η μεταβλητη block[set][way].prefetch γινεται 1 μεσα στην cache_fill και μεσα στην prefetch_code_line. Το μορριγκαν την εβγαζε πενα απο το prefetch_code_line, οπου το .prefetch γινεται 1.
Η cache fill καλειται απο τις:
handle_fill()
handle_writeback()

